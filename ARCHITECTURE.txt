╔═══════════════════════════════════════════════════════════════════╗
║              EQHO DUE DILIGENCE - ARCHITECTURE                    ║
╚═══════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────┐
│                    FRONTEND (React + Vite)                       │
│                   financis.eqho.ai (Vercel)                      │
│                                                                   │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐          │
│  │ Slide 1  │ │ Slide 2  │ │ Slide 3  │ │ Slide 4  │ ...      │
│  │ Exec Sum │ │ Financials│ │ Market  │ │ Growth   │          │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘          │
└────────────────────────┬────────────────────────────────────────┘
                         │ API Calls
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│               BACKEND API (FastAPI + Python)                     │
│                   api.eqho.ai (Railway)                          │
│                                                                   │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  IN-MEMORY CACHE (Python Dict + TTL)                     │  │
│  │  Response: < 1ms  |  TTL: 5 minutes                      │  │
│  └────────────────────┬─────────────────────────────────────┘  │
│                       │ Cache Miss                              │
│                       ▼                                          │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  SUPABASE SERVICE                                        │  │
│  │  - Query stripe_subscriptions                            │  │
│  │  - Query stripe_customers                                │  │
│  │  - Query mrr_snapshots                                   │  │
│  │  Response: < 50ms                                        │  │
│  └──────────────────────────────────────────────────────────┘  │
└────────────────────────┬────────────────────────────────────────┘
                         │ Reads
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                  SUPABASE (PostgreSQL)                           │
│              https://yindsqbhygvskolbccqq.supabase.co           │
│                                                                   │
│  Tables:                                                         │
│  ├─ stripe_subscriptions (MRR, product category)                │
│  ├─ stripe_customers (totals, metadata)                         │
│  └─ mrr_snapshots (daily trends)                                │
└────────────────────────┬────────────────────────────────────────┘
                         │ Writes (hourly sync)
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                  SYNC SCRIPT (Node.js)                           │
│            scripts/sync_stripe_to_supabase.js                    │
│                                                                   │
│  ├─ Fetch subscriptions from Stripe                             │
│  ├─ Calculate MRR and categorize                                │
│  ├─ Store in Supabase                                            │
│  └─ Create daily snapshots                                       │
└────────────────────────┬────────────────────────────────────────┘
                         │ API Calls
                         ▼
                  ┌──────────────┐
                  │  STRIPE API  │
                  └──────────────┘

═══════════════════════════════════════════════════════════════════

PERFORMANCE:
- First request: ~50ms (Supabase query)
- Cached request: < 1ms (in-memory)
- Cache TTL: 5 minutes

SIMPLIFICATION:
- Before: MongoDB + Docker + Multi-tier cache
- After: Supabase + Python dict cache
- Setup time: 30 min → 5 min

STATUS: ✅ READY FOR PRODUCTION
